<main class="b-container">
  <div class="b-back-button">
    <biggive-formatted-text>
      <a *ngIf="campaign.parentRef && fromFund" mat-icon-button [routerLink]="'/' + campaign.parentRef + '/' + campaign.championRef">
        <mat-icon class="listing-button__icon" aria-hidden="false" aria-label="Back">keyboard_arrow_left</mat-icon>
        All {{ campaign.championName }} campaigns<br>
      </a>
      <a
        class=""
        *ngIf="campaign.parentRef"
        mat-icon-button
        (click)="goBackToMetacampaign()"
      >
        <mat-icon aria-hidden="false" aria-label="Back">keyboard_arrow_left</mat-icon>
        All participating campaigns
      </a>
      <a *ngIf="!campaign.parentRef" mat-icon-button routerLink="/">
        <mat-icon class="" aria-hidden="false" aria-label="Back">keyboard_arrow_left</mat-icon>
        All campaigns
      </a>
    </biggive-formatted-text>
  </div>

  <div fxLayout="row" fxLayout.lt-md="column">
    <div class="b-primary-column">
      <biggive-branded-image
        space-below="4"
        [imageUrl]="campaign.bannerUri"
        [logoUrl]="campaign.charity.logoUri"
        slug="Match Funded"
        [charityName]="campaign.charity.name"
        [charityUrl]="campaign.charity.website"
        [charityLocation]="campaign.countries.length ? campaign.countries[0] : null"
      >
      </biggive-branded-image>

      <biggive-formatted-text
        default-text-colour="black">
        <h1>{{ campaign.title }}</h1>
        <p>{{ campaign.summary }}</p>
      </biggive-formatted-text>

      <biggive-social-icon *ngIf="campaign.charity.facebook" service="Facebook" [url]="campaign.charity.facebook" background-colour="black" icon-colour="white"></biggive-social-icon>
      <biggive-social-icon *ngIf="campaign.charity.twitter" service="Twitter" [url]="campaign.charity.twitter" background-colour="black" icon-colour="white"></biggive-social-icon>
      <biggive-social-icon *ngIf="campaign.charity.linkedin" service="LinkedIn" [url]="campaign.charity.linkedin" background-colour="black" icon-colour="white"></biggive-social-icon>
      <biggive-social-icon *ngIf="campaign.charity.instagram" service="Instagram" [url]="campaign.charity.instagram" background-colour="black" icon-colour="white"></biggive-social-icon>

      <div id="campaign-highlights-beneficiaries-and-categories-mobile">
        <div class="button-wrapper">
          <biggive-button
            space-below="5"
            colour-scheme="primary"
            label="Donate now"
            full-width="true"
            size="medium"
            rounded="false"
            [url]="'/donate/' + campaign.id"
            [isFutureCampaign]="campaignInFuture"
            [isPastCampaign]="campaignInPast"
            [datetime]="getRelevantDateAsStr(campaign)">
          </biggive-button>
        </div>
        <app-campaign-info [campaign]="campaign"></app-campaign-info>
      </div>

      <div class="c-video" *ngIf="videoEmbedUrl">
        <iframe
          loading="lazy"
          class="c-video__iframe b-w-100"
          [src]="videoEmbedUrl"
          frameborder="0"
          allow="encrypted-media"
          webkitallowfullscreen="true"
          mozallowfullscreen="true"
          allowfullscreen="true"></iframe>
      </div>


      <div class="c-tabs">
        <mat-tab-group class="c-tab-group" animationDuration="0ms" [color]="'tbg-primary'">
          <mat-tab label="Campaign overview">
            <div class="c-details">

              <biggive-heading
                space-above=6
                space-below=0
                colour="primary"
                html-element="h3"
                size="3"
                align="left"
                text="Situation"
              >
              </biggive-heading>

              <biggive-formatted-text
                default-text-colour="black">
                <p>{{ campaign.problem }}</p>
              </biggive-formatted-text>

              <biggive-heading
                space-above=6
                space-below=0
                colour="primary"
                html-element="h3"
                size="3"
                align="left"
                text="Solution"
              >
              </biggive-heading>

              <biggive-formatted-text
                default-text-colour="black">
                <p>{{ campaign.solution }}</p>
              </biggive-formatted-text>

            </div>

            <div class="c-additional" *ngIf="additionalImageUris.length > 0">
              <img *ngFor="let uri of additionalImageUris" [src]="uri" class="c-additional__images">
            </div>

            <ul class="c-quotes" *ngIf="campaign.quotes.length > 0">
              <li *ngFor="let quote of campaign.quotes">


                <biggive-quote
                  space-below="4"
                  default-text-colour="black"
                  [quote]="quote.quote"
                  [attribution]="quote.person"
                >
                </biggive-quote>
              </li>
            </ul>
          </mat-tab>

          <mat-tab *ngIf="campaign.updates.length > 0" label="Updates">
            <ul class="c-updates" *ngFor="let update of campaign.updates">
              <li>
                <biggive-formatted-text>
                  <h4 class="b-semi-bold b-mb-0">{{ update.modifiedDate | date : 'longDate' }}</h4>
                  <p class="c-updates__description">{{ update.content }}</p>
                </biggive-formatted-text>
              </li>
            </ul>
          </mat-tab>

          <mat-tab *ngIf="campaign.aims.length > 0" label="Aims">
            <biggive-heading
              space-above=6
              space-below=0
              colour="primary"
              html-element="h3"
              size="3"
              align="left"
              text="Campaign Aims"
            >
            </biggive-heading>

            <ul class="c-aims" *ngFor="let aim of campaign.aims">
              <li class="b-rt-0">{{ aim }}</li>
            </ul>
          </mat-tab>

          <mat-tab *ngIf="campaign.budgetDetails.length > 0 || campaign.alternativeFundUse" label="Where's the money going?">

            <biggive-heading
              space-above=6
              space-below=0
              colour="primary"
              html-element="h3"
              size="3"
              align="left"
              text="Campaign Budget"
            >
            </biggive-heading>

            <ul class="c-budget" *ngFor="let detail of campaign.budgetDetails">
              <li class="c-budget__item">
                <span class="c-budget__value b-semi-bold">{{ detail.amount | currency : campaign.currencyCode : 'symbol' : '1.0-0' }}</span>
                &ndash; {{ detail.description }}
              </li>
            </ul>

            <div class="c-alternative-funds" *ngIf="campaign.alternativeFundUse">
              <biggive-heading
                space-above=6
                space-below=0
                colour="primary"
                html-element="h4"
                size="4"
                align="left"
                text="Understanding the Target"
              >
              </biggive-heading>
              <p class="c-alternative-funds__description">{{ campaign.alternativeFundUse }}</p>
            </div>
          </mat-tab>

          <mat-tab label="Impact &amp; reporting">
            <div class="c-impact">
              <biggive-heading
                space-above=6
                space-below=0
                colour="primary"
                html-element="h3"
                size="3"
                align="left"
                text="Impact"
              >
              </biggive-heading>
              <p class="c-impact__description">{{ campaign.impactSummary }}</p>

              <biggive-heading
                space-above=6
                space-below=0
                colour="primary"
                html-element="h3"
                size="3"
                align="left"
                text="Reporting"
              >
              </biggive-heading>
              <p class="c-impact__description">{{ campaign.impactReporting }}</p>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>

    </div>

    <div class="b-secondary-column">
      <div id="campaign-highlights-beneficiaries-and-categories-desktop">
        <app-campaign-info [campaign]="campaign"></app-campaign-info>

        <div class="button-wrapper">
          <biggive-button
            space-above="5"
            colour-scheme="primary"
            label="Donate now"
            full-width="true"
            size="medium"
            rounded="false"
            [url]="'/donate/' + campaign.id"
            [isFutureCampaign]="campaignInFuture"
            [isPastCampaign]="campaignInPast"
            [datetime]="getRelevantDateAsStr(campaign)"
            >
          </biggive-button>
        </div>

      </div>
    </div>
  </div>

  <div fxLayout="row">
  </div>

</main>
